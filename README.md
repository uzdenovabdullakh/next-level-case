
# Next-Level Case

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º NestJS, PostgreSQL, RabbitMQ –∏ Kubernetes —Å HPA (Horizontal Pod Autoscaler).

---

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

- **API-—Å–µ—Ä–≤–∏—Å (`api/`)** ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –ø—Ä–∏—ë–º–∞ –∑–∞–¥–∞—á, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å PostgreSQL –∏ RabbitMQ.
- **Worker-—Å–µ—Ä–≤–∏—Å (`worker/`)** ‚Äî –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ RabbitMQ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`k8s/`)** ‚Äî –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã Kubernetes –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤.

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –º–æ–≥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∫–∞–∫ —á–µ—Ä–µ–∑ `docker-compose`, —Ç–∞–∫ –∏ –≤ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä–µ.

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç             | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                         |
|------------------------|----------------------------------------------------|
| `api/`                | NestJS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å REST API –∏ RabbitMQ publisher |
| `worker/`             | NestJS-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Ç—Ä–µ–±–ª—è—é—â–µ–µ –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ |
| `docker-compose.yml`  | –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ PostgreSQL, RabbitMQ, API –∏ Worker |
| `k8s/`                | YAML-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã Kubernetes (Deployments, Services, HPA, Secrets –∏ —Ç.–¥.) |

---

## üöÄ –ó–∞–ø—É—Å–∫

### üîß 1. –ß–µ—Ä–µ–∑ Docker Compose

#### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:
- Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

#### –ó–∞–ø—É—Å–∫:
```bash
cp .env.example .env
docker-compose up --build -d
```

–°–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- API: `http://localhost:3000`
- RabbitMQ UI: `http://localhost:15672` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å ‚Äî `user`/`password`)
- PostgreSQL: `localhost:5432` (–ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ `.env`)

---

### ‚ò∏Ô∏è 2. –ß–µ—Ä–µ–∑ Kubernetes

#### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è:
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `kubectl`, `minikube` (–∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É)

#### –®–∞–≥–∏:

```bash
# –ó–∞–ø—É—Å–∫ minikube (–µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)
minikube start

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
kubectl apply -f k8s/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
kubectl get pods
```

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–∞—Ö:

- `.env.example`
- `api/.env.example`
- `worker/.env.example`

–ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `RABBITMQ_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ
- `QUEUE_NAME` ‚Äî –∏–º—è –æ—á–µ—Ä–µ–¥–∏
- `PORT` ‚Äî –ø–æ—Ä—Ç –¥–ª—è API —Å–µ—Ä–≤–∏—Å–∞

---

## ‚öôÔ∏è –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω **NestJS** –∫–∞–∫ –µ–¥–∏–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è API –∏ worker-–∞ ‚Äî —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞.
- –í—ã–¥–µ–ª–µ–Ω **–æ—Ç–¥–µ–ª—å–Ω—ã–π worker-—Å–µ—Ä–≤–∏—Å**, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç API.
- **RabbitMQ** –≤—ã–±—Ä–∞–Ω –∫–∞–∫ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∑–∞–¥–∞—á –º–µ–∂–¥—É API –∏ –≤–æ—Ä–∫–µ—Ä–∞–º–∏.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PostgreSQL** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **Kubernetes-–º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ —Å HPA** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ.
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **ConfigMap/Secret**, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
- **Docker Compose** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ k8s.
- **Winston** –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---
